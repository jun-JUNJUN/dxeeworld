# ページ構成と表示項目

**Feature**: review-detail-pages
**作成日**: 2025-11-27
**更新日**: 2025-12-14

このドキュメントは、レビュー詳細ページ機能に関連する全ページの構成と表示項目を入れ子構造で記載しています。実装後の保守性向上と、新規開発者がコードベースを理解しやすくするための参照ドキュメントです。

---

## 個別レビュー詳細ページ (`/companies/{company_id}/reviews/{review_id}`)

```
個別レビュー詳細ページ
├── ヘッダー部
│   ├── パンくずリスト
│   │   └── ホーム > 企業一覧 > {企業名} > レビュー
│   ├── 企業名（リンク付き）
│   └── 戻るリンク（企業詳細ページへ）
│
├── レビュー基本情報
│   ├── 投稿者の匿名化表示（例：ユーザーA）
│   ├── 投稿日時
│   ├── 在籍状況（現職/元職）
│   └── 勤務期間（開始年〜終了年）
│
├── 評価サマリー
│   ├── 個別平均評価スコア
│   └── 回答項目数
│
├── 評価項目詳細（6項目）
│   ├── 推薦度
│   │   ├── 星評価（1-5または未回答）
│   │   └── コメント（テキスト）
│   ├── 受入制度
│   │   ├── 星評価（1-5または未回答）
│   │   └── コメント（テキスト）
│   ├── 会社風土
│   │   ├── 星評価（1-5または未回答）
│   │   └── コメント（テキスト）
│   ├── 関係性
│   │   ├── 星評価（1-5または未回答）
│   │   └── コメント（テキスト）
│   ├── 評価制度
│   │   ├── 星評価（1-5または未回答）
│   │   └── コメント（テキスト）
│   └── 昇進待遇
│       ├── 星評価（1-5または未回答）
│       └── コメント（テキスト）
│
├── 多言語表示（該当する場合）
│   ├── 元の言語のコメント
│   └── 翻訳版コメント（EN/ZH/JA）
│
└── アクション部
    ├── 企業詳細ページに戻るボタン
    └── CTA（プレビューモードの場合）
        └── レビュー投稿を促すメッセージ
```

---

## 質問別レビュー一覧ページ (`/companies/{company_id}/reviews/by-category/{category_name}`)

```
質問別レビュー一覧ページ
├── ヘッダー部
│   ├── パンくずリスト
│   │   └── ホーム > 企業一覧 > {企業名} > {評価項目名}
│   ├── 企業名（リンク付き）
│   ├── 評価項目名（日本語表示）
│   ├── 当該項目の平均評価スコア
│   ├── レビュー総数
│   └── 戻るリンク（企業詳細ページへ）
│
├── レビューリスト（カード形式）
│   └── レビューカード（各レビュー）
│       ├── 投稿者の匿名化表示
│       ├── 投稿日時
│       ├── 在籍状況
│       ├── 勤務期間
│       ├── 当該項目の星評価（1-5または未回答）
│       ├── 当該項目のコメント（テキスト、プレビューモードではマスキング）
│       └── 「詳細を見る」リンク（個別レビュー詳細ページへ）
│
├── ページネーション（20件以上の場合）
│   ├── 現在のページ番号
│   ├── 総ページ数
│   ├── 前ページリンク
│   └── 次ページリンク
│
└── 空状態メッセージ（レビュー0件の場合）
    └── 「この項目に関するレビューはまだありません」
```

---

## 企業詳細ページへの統合要素

```
企業詳細ページ（既存ページへの追加要素）
├── （既存コンテンツ）
│
├── レビューサマリーセクション（既存）
│   └── （既存のレビュー表示）
│
└── 質問別レビュー一覧セクション（新規追加）
    ├── セクションタイトル：「質問別レビュー一覧」
    └── カテゴリボタングリッド（3列×2行、モバイルは1列）
        ├── 推薦度のレビューを見るボタン
        ├── 受入制度のレビューを見るボタン
        ├── 会社風土のレビューを見るボタン
        ├── 関係性のレビューを見るボタン
        ├── 評価制度のレビューを見るボタン
        └── 昇進待遇のレビューを見るボタン
```

---

## レビュー一覧ページへの統合要素

```
レビュー一覧ページ（既存ページへの変更）
├── （既存コンテンツ）
│
└── 企業カード（各企業）
    ├── （既存の企業情報）
    └── カテゴリバッジ（変更：クリッカブルリンク化）
        ├── 推薦度バッジ → カテゴリ別レビュー一覧へのリンク
        ├── 受入制度バッジ → カテゴリ別レビュー一覧へのリンク
        ├── 会社風土バッジ → カテゴリ別レビュー一覧へのリンク
        ├── 関係性バッジ → カテゴリ別レビュー一覧へのリンク
        ├── 評価制度バッジ → カテゴリ別レビュー一覧へのリンク
        └── 昇進待遇バッジ → カテゴリ別レビュー一覧へのリンク
```

---

## 評価項目（カテゴリ）一覧

全ページで使用される6つの評価項目：

| カテゴリID | 日本語名 | 英語名 |
|-----------|----------|--------|
| recommendation | 推薦度 | Recommendation |
| foreign_support | 受入制度 | Foreign Support |
| company_culture | 会社風土 | Company Culture |
| employee_relations | 関係性 | Employee Relations |
| evaluation_system | 評価制度 | Evaluation System |
| promotion_treatment | 昇進待遇 | Promotion & Treatment |

---

## アクセス制御による表示の違い

### プレビューモード（Preview）
- レビュー詳細ページ：コメントテキストがマスキングされる（星評価は表示）
- カテゴリ別レビュー一覧：コメントテキストがマスキングされる
- CTA表示：レビュー投稿を促すメッセージが表示される

### フルアクセスモード（Full）
- すべてのレビュー情報が完全に表示される
- CTAは表示されない

### アクセス拒否モード（Denied）
- レビュー詳細ページにアクセスできない
- カテゴリ別レビュー一覧ページにアクセスできない
- アクセス拒否メッセージが表示される

### クローラーモード（Crawler）
- レビュー詳細ページにアクセスできる（SEO対応）
- すべてのコンテンツが表示される（検索エンジンのインデックス用）

---

## レスポンシブデザイン

### デスクトップ（768px以上）
- 質問別レビュー一覧セクション：3列グリッド
- レビューカード：2カラムレイアウト可能
- パンくずリスト：完全表示

### モバイル（768px未満）
- 質問別レビュー一覧セクション：1列スタック
- レビューカード：1カラム縦積み
- パンくずリスト：コンパクト表示またはスクロール可能

---

## ナビゲーション構造

```
ホーム
└── 企業一覧 (/companies)
    └── 企業詳細 (/companies/{id})
        ├── レビュー一覧（企業詳細ページ内）
        │   └── 個別レビュー詳細 (/companies/{id}/reviews/{review_id})
        │
        └── 質問別レビュー一覧 (/companies/{id}/reviews/by-category/{category})
            └── 個別レビュー詳細 (/companies/{id}/reviews/{review_id})
```

**戻るリンク**:
- 個別レビュー詳細 → 企業詳細ページ
- 質問別レビュー一覧 → 企業詳細ページ

**同一タブナビゲーション**:
- すべての内部リンクは`target="_blank"`を使用せず、同一タブで開く
